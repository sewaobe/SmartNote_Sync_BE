### SmartNote Sync Backend - Happy Case Testing
### Use VS Code REST Client extension to test these endpoints

@baseUrl = http://localhost:5000/api
@classId = 6918298b400b4d7ede47d0bf
@lectureId = 69182ad0faf294fc3f48c783
@teacherToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OTE4Mjk4YjQwMGI0ZDdlZGU0N2QwYmMiLCJ1c2VyVHlwZSI6InN0dWRlbnQiLCJpYXQiOjE3NjMyMDY1NjksImV4cCI6MTc2MzgxMTM2OX0.3rSkUZXYZAMnSyBrbCx051dPG641Ik5NgyWsFoBjDvI
@studentId = 6918298b400b4d7ede47d0bc
@noteId = 691865f8d51151e951aafd1f
@transcriptId = 6918386c490b801cdcc56ceb
@summaryId = 69184ccb7a18c0f3e0e8baf8

# ====================================
# AUTH ENDPOINTS (JWT)
# ====================================

### 1. Login as Teacher
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "studentB@student.edu.vn",
  "password": "123456789"
}

### 2. Get Current User (Requires JWT Token)
GET {{baseUrl}}/auth/me
Authorization: Bearer {{teacherToken}}


# ====================================
# LECTURE ENDPOINTS WITH JWT AUTH
# ====================================

### 3. Get Lectures by Class (JWT Required + Authorization Check)
GET {{baseUrl}}/lectures/class/{{classId}}
Authorization: Bearer {{teacherToken}}


### 4. Get Classes (JWT Required)
GET {{baseUrl}}/classes
Authorization: Bearer {{teacherToken}}

### 5. Get Specific Class (JWT Required)
GET {{baseUrl}}/classes/{{classId}}
Authorization: Bearer {{teacherToken}}

# ====================================
# FILE UPLOAD ENDPOINTS
# ====================================

### 8. Upload General File
POST {{baseUrl}}/files/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="Profile.pdf"
Content-Type: application/pdf

< ./Profile.pdf
------WebKitFormBoundary7MA4YWxkTrZu0gW--


### 9. Get Presigned URL for Download
GET {{baseUrl}}/files/presigned/67564a1234567890abcdef01_Profile.pdf


# ====================================
# LECTURE MANAGEMENT
# ====================================

### 10. Create Lecture (Teacher uploads PDF for class)
POST {{baseUrl}}/lectures/create/{{classId}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="title"

Lecture 1 - Introduction to Backend
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="lecture1.pdf"
Content-Type: application/pdf

< ./Profile.pdf
------WebKitFormBoundary7MA4YWxkTrZu0gW--


### 11. Get Lecture by ID
GET {{baseUrl}}/lectures/{{lectureId}}


### 12. Delete Lecture
DELETE {{baseUrl}}/lectures/{{lectureId}}


# ====================================
# NOTE ENDPOINTS
# ====================================

### 7. Create Note - HAPPY CASE (With userId)
POST {{baseUrl}}/notes
Authorization: Bearer {{teacherToken}}
Content-Type: application/json

{
  "lecture_id": "{{lectureId}}",
  "position": {
    "x": 150,
    "y": 200
  },
  "content": "empty",
  "created_at": "2025-11-15T10:00:00Z",
  "record_id": "69185251ad505db4754116dd",
  "page_index": 1
}


### 8. Get All Notes
GET {{baseUrl}}/notes


### 9. Get Note by ID
GET {{baseUrl}}/notes/{{noteId}}


### 10. Get Notes by Owner/Student ID
GET {{baseUrl}}/notes/owner/{{studentId}}


### 10.5. Get Notes by Owner ID and Lecture ID
GET {{baseUrl}}/notes/lecture/{{lectureId}}
Authorization: Bearer {{teacherToken}}

### 11. Update Note
PUT {{baseUrl}}/notes/{{noteId}}
Content-Type: application/json

{
  "content": "Updated note - Now with more details about design patterns and best practices"
}

### 12. Search Notes
GET {{baseUrl}}/notes/search?query=database

### 13. Delete Note
DELETE {{baseUrl}}/notes/{{noteId}}


# ====================================
# SUMMARY ENDPOINTS (Gemini AI)
# ====================================

### 14. Generate Summary from Transcript (With Personalization - userId from JWT)
POST {{baseUrl}}/summaries/generate
Authorization: Bearer {{teacherToken}}
Content-Type: application/json

{
  "lecture_id": "{{lectureId}}",
  "transcript_id": "{{transcriptId}}",
  "full_text": "Hôm nay chúng ta sẽ tìm hiểu về Node.js, một runtime JavaScript được xây dựng trên engine V8 của Chrome. Node.js cho phép chúng ta chạy JavaScript phía máy chủ (server-side). Lợi thế của Node.js là nó không chặn (non-blocking), có nghĩa là nó có thể xử lý nhiều yêu cầu cùng một lúc mà không cần chờ. Node.js sử dụng event-driven architecture, điều này làm cho nó rất hiệu quả cho các ứng dụng yêu cầu truyền tải dữ liệu thời gian thực. Package manager npm giúp chúng ta cài đặt các thư viện và framework như Express.js để xây dựng các ứng dụng web. Express.js là một framework phổ biến cho phép chúng ta tạo các API RESTful một cách dễ dàng. Trong khóa học này, chúng ta sẽ học cách tạo các route, middleware, xử lý lỗi và kết nối cơ sở dữ liệu. Chúng ta cũng sẽ học về authentication và authorization để bảo vệ các API của mình. Cuối cùng, chúng ta sẽ học về deployment để đưa ứng dụng của mình lên production."
}


### 15. Get All Summaries
GET {{baseUrl}}/summaries


### 16. Get Summary by Lecture ID
GET {{baseUrl}}/summaries/lecture/{{lectureId}}


### 17. Get Summary by ID
GET {{baseUrl}}/summaries/{{summaryId}}


### 18. Delete Summary
DELETE {{baseUrl}}/summaries/{{summaryId}}